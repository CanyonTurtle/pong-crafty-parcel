{"dependencies":[{"name":"../core/core.js","loc":{"line":1,"column":21}}],"generated":{"js":"var t=require(\"../core/core.js\");t.c(\"Supportable\",{_ground:null,_groundComp:null,_preventGroundTunneling:!1,canLand:!0,init:function(){this.requires(\"2D\"),this.__area={_x:0,_y:0,_w:0,_h:0},this.defineField(\"ground\",function(){return this._ground},function(t){})},remove:function(t){this.unbind(\"EnterFrame\",this._detectGroundTick)},startGroundDetection:function(t){return t&&(this._groundComp=t),this.uniqueBind(\"EnterFrame\",this._detectGroundTick),this},stopGroundDetection:function(){return this.unbind(\"EnterFrame\",this._detectGroundTick),this},preventGroundTunneling:function(t){return void 0===t&&(t=!0),t&&this.requires(\"Motion\"),this._preventGroundTunneling=t,this},_detectGroundTick:function(){var i,n=this._groundComp,r=this._ground,s=t.rectManager.overlap;if(this._preventGroundTunneling)i=this.ccdbr(this.__area);else{var h=this._cbr||this._mbr||this;(i=this.__area)._x=h._x,i._y=h._y,i._w=h._w,i._h=h._h}if(i._h++,r){var e=r._cbr||r._mbr||r;r.__c[n]&&t(r[0])===r&&s(e,i)||(this._ground=null,this.trigger(\"LiftedOffGround\",r),r=null)}if(!r)for(var u,o,a=t.map.search(i,!1),d=0,_=a.length;d<_;++d)if(u=a[d],o=u._cbr||u._mbr||u,u!==this&&u.__c[n]&&s(o,i)&&(this.canLand=!0,this.trigger(\"CheckLanding\",u),this.canLand)){this._ground=r=u,this.y=r._y-this._h,this._x>r._x+r._w?this.x=r._x+r._w-1:this._x+this._w<r._x&&(this.x=r._x-this._w+1),this.trigger(\"LandedOnGround\",r);break}}}),t.c(\"GroundAttacher\",{_groundAttach:function(t){t.attach(this)},_groundDetach:function(t){t.detach(this)},init:function(){this.requires(\"Supportable\"),this.bind(\"LandedOnGround\",this._groundAttach),this.bind(\"LiftedOffGround\",this._groundDetach)},remove:function(t){this.unbind(\"LandedOnGround\",this._groundAttach),this.unbind(\"LiftedOffGround\",this._groundDetach)}}),t.c(\"Gravity\",{_gravityConst:500,_gravityActive:!1,init:function(){this.requires(\"2D, Supportable, Motion\"),this.bind(\"LiftedOffGround\",this._startGravity),this.bind(\"LandedOnGround\",this._stopGravity)},remove:function(t){this.unbind(\"LiftedOffGround\",this._startGravity),this.unbind(\"LandedOnGround\",this._stopGravity)},_gravityCheckLanding:function(t){this._dy<0&&(this.canLand=!1)},gravity:function(t){return this.uniqueBind(\"CheckLanding\",this._gravityCheckLanding),this.startGroundDetection(t),this._startGravity(),this},antigravity:function(){return this._stopGravity(),this.stopGroundDetection(),this.unbind(\"CheckLanding\",this._gravityCheckLanding),this},gravityConst:function(t){return this._gravityActive&&(this.ay-=this._gravityConst,this.ay+=t),this._gravityConst=t,this},_startGravity:function(){this._gravityActive||(this._gravityActive=!0,this.ay+=this._gravityConst)},_stopGravity:function(){this._gravityActive&&(this._gravityActive=!1,this.ay=0,this.vy=0)}});"},"hash":"e921dd960883564be67bd704d8c4dda7"}