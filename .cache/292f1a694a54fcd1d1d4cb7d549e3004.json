{"dependencies":[{"name":"../core/core.js","loc":{"line":1,"column":21}}],"generated":{"js":"var e=require(\"../core/core.js\");module.exports={assets:{},__paths:{audio:\"\",images:\"\"},paths:function(e){if(void 0===e)return this.__paths;e.audio&&(this.__paths.audio=e.audio),e.images&&(this.__paths.images=e.images)},asset:function(s,t){return 1===arguments.length?e.assets[s]:e.assets[s]?void 0:(e.assets[s]=t,this.trigger(\"NewAsset\",{key:s,value:t}),t)},imageWhitelist:[\"jpg\",\"jpeg\",\"gif\",\"png\",\"svg\"],load:function(s,t,i,r){function a(){var e=this.src;this.removeEventListener&&this.removeEventListener(\"canplaythrough\",a,!1),l++,i&&i({loaded:l,total:c,percent:l/c*100,src:e}),l===c&&t&&t()}function o(){var e=this.src;r&&r({loaded:l,total:c,percent:l/c*100,src:e}),++l===c&&t&&t()}if(Array.isArray(s))e.log(\"Calling Crafty.load with an array of assets no longer works; see the docs for more details.\");else{var n,u,d,p,f,l=0,c=((s=\"string\"==typeof s?JSON.parse(s):s).audio?Object.keys(s.audio).length:0)+(s.images?Object.keys(s.images).length:0)+(s.sprites?Object.keys(s.sprites).length:0),g=e.paths(),h=function(e){return e.substr(e.lastIndexOf(\".\")+1).toLowerCase()},v=function(e,s){return-1===s.search(\"://\")?\"audio\"===e?g.audio+s:g.images+s:s},m=function(s){return e.asset(s)||null},y=function(s){return e.support.audio&&e.audio.supports(h(s))},j=function(s){return-1!==e.imageWhitelist.indexOf(h(s))},O=function(s,t){s.onload=a,\"webkit\"===e.support.prefix&&(s.src=\"\"),s.src=t};for(p in s)for(f in s[p])if(s[p].hasOwnProperty(f)){if(n=s[p][f],d=null,\"audio\"===p){if(\"object\"==typeof n){var b=[];for(var w in n)m(u=v(p,n[w]))||!y(n[w])||e.audio.sounds[f]||b.push(u);b.length>0&&(d=e.audio.add(f,b))}else\"string\"==typeof n&&(m(u=v(p,n))||!y(n)||e.audio.sounds[f]||(d=e.audio.add(f,u)));d&&(d=d.obj),d&&d.addEventListener&&d.addEventListener(\"canplaythrough\",a,!1)}else!m(u=v(p,f=\"sprites\"===p?f:n))&&j(f)&&(d=new Image,\"sprites\"===p&&e.sprite(n.tile,n.tileh,u,n.map,n.paddingX,n.paddingY,n.paddingAroundBorder),e.asset(u,d),O(d,u));d?d.onerror=o:o.call({src:u})}0===c&&t&&t()}},removeAssets:function(s){s=\"string\"==typeof s?JSON.parse(s):s;var t,i,r,a,o=e.paths(),n=function(e,s){return-1===s.search(\"://\")?\"audio\"===e?o.audio+s:o.images+s:s};for(r in s)for(a in s[r])if(s[r].hasOwnProperty(a))if(t=s[r][a],\"audio\"===r)if(\"object\"==typeof t)for(var u in t)i=n(r,t[u]),e.asset(i)&&e.audio.remove(a);else\"string\"==typeof t&&(i=n(r,t),e.asset(i)&&e.audio.remove(a));else if(a=\"sprites\"===r?a:t,i=n(r,a),e.asset(i)){if(\"sprites\"===r)for(var d in t.map)delete e.components()[d];delete e.assets[i]}}};"},"hash":"90f68bb2a3f1f24c8716f05824b9cf18"}