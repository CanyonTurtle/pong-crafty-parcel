{"dependencies":[{"name":"../core/core.js","loc":{"line":1,"column":21}}],"generated":{"js":"function i(i){e.mouseObjs++,this.button=i}function t(i){this.key=i}function n(i){this.inputs=i}var e=require(\"../core/core.js\");i.prototype={isDown:function(){return e.mouseButtonsDown[this.button]},destroy:function(){e.mouseObjs--}},t.prototype={isDown:function(){return e.keydown[this.key]}},n.prototype={timeDown:null,isActive:function(){for(var i in this.inputs){if(this.inputs[i].isDown())return this.timeDown||(this.timeDown=Date.now()),!0}return delete this.timeDown,!1},destroy:function(){for(var i in this.inputs)\"function\"==typeof this.inputs[i].destroy&&this.inputs[i].destroy()}},e.s(\"Controls\",{init:function(){this._dpads={},this._triggers={}},events:{EnterFrameInput:function(){this.runEvents()},KeyDown:function(){this.updateTriggers()},KeyUp:function(){this.updateTriggers()},MouseDown:function(i){this.updateTriggers()},MouseUp:function(i){this.updateTriggers()}},updateTriggers:function(i){for(var t in this._triggers){var n=this._triggers[t];this.updateTriggerInput(n)}},runEvents:function(){for(var i in this._dpads){var t=this._dpads[i];t.oldX=t.x,t.oldY=t.y,this.updateDpadInput(t,t.multipleDirectionBehavior),this.updateActiveDirection(t,t.normalize),t.event.x=t.x,t.event.y=t.y,t.x===t.oldX&&t.y===t.oldY||e.trigger(\"DirectionalInput\",t.event)}},getDpad:function(i){return this._dpads[i]},isTriggerDown:function(i){return this._triggers[i].active},defineTriggerGroup:function(e,r){var o;if(Array.isArray(r))o=r;else{if(o=[],r.mouseButtons)for(var s in r.mouseButtons)o.push(new i(r.mouseButtons[s]));if(r.keys)for(var u in r.keys)o.push(new t(r.keys[u]))}this._triggers[e]&&this._triggers[e].input.destroy(),this._triggers[e]={name:e,input:new n(o),downFor:0,active:!1}},defineDpad:function(i,r,o){var s={};for(var u in r){var a=r[u],p=e.keys[u]||u;s[a]||(s[a]=[]),s[a].push(new t(p))}var d={};for(var c in s)d[c]={input:new n(s[c]),active:!1,n:this.parseDirection(c)};if(void 0===o&&(o={}),void 0===o.normalize&&(o.normalize=!1),void 0===o.multipleDirectionBehavior&&(o.multipleDirectionBehavior=\"all\"),this._dpads[i]){for(c in this._dpads[i].parsedDefinition)this._dpads[i].parsedDefinition[c].input.destroy();delete this._dpads[i]}this._dpads[i]={name:i,directions:d,x:0,y:0,oldX:0,oldY:0,event:{x:0,y:0,name:i},normalize:o.normalize,multipleDirectionBehavior:o.multipleDirectionBehavior}},parseDirection:function(i){return{x:Math.round(1e3*Math.cos(i*(Math.PI/180)))/1e3,y:Math.round(1e3*Math.sin(i*(Math.PI/180)))/1e3}},updateActiveDirection:function(i,t){i.x=0,i.y=0;for(var n in i.directions){var e=i.directions[n];e.active&&(i.x+=e.n.x,i.y+=e.n.y)}if(t){var r=Math.sqrt(i.x*i.x+i.y*i.y);r>0&&(i.x=i.x/r,i.y=i.y/r)}},updateTriggerInput:function(i){i.active?i.input.isActive()||(i.active=!1,e.trigger(\"TriggerInputUp\",i),i.downFor=0):i.input.isActive()&&(i.downFor=Date.now()-i.input.timeDown,i.active=!0,e.trigger(\"TriggerInputDown\",i))},updateDpadInput:function(i,t){var n,e,r;for(n in i.directions)(e=i.directions[n]).active=!1,e.input.isActive()&&(\"all\"===t?e.active=!0:r?(\"first\"===t&&r.input.timeDown>e.input.timeDown&&(r=e),\"last\"===t&&r.input.timeDown<e.input.timeDown&&(r=e)):r=e);r&&(r.active=!0)}});"},"hash":"1e05402ce3e41564ddd0aa971d9084ae"}