{"dependencies":[{"name":"../core/core.js","loc":{"line":1,"column":21}}],"generated":{"js":"var Crafty = require('../core/core.js');\n\n\n/**@\n * #Renderable\n * @category Graphics\n * @kind Component\n * \n * Component for any entity that has a position on the stage.\n * @trigger Invalidate - when the entity needs to be redrawn\n */\nCrafty.c(\"Renderable\", {\n\n    // Flag for tracking whether the entity is dirty or not\n    _changed: false,\n    \n    /**@\n     * #.alpha\n     * @comp Renderable\n     * @kind Property\n     * \n     * Transparency of an entity. Must be a decimal value between 0.0 being fully transparent to 1.0 being fully opaque.\n     */\n    _alpha: 1.0,\n\n    /**@\n     * #.visible\n     * @comp Renderable\n     * @kind Property\n     * \n     * If the entity is visible or not. Accepts a true or false value.\n     * Can be used for optimization by setting an entities visibility to false when not needed to be drawn.\n     *\n     * The entity will still exist and can be collided with but just won't be drawn.\n     */\n    _visible: true,\n\n    _setterRenderable: function(name, value) {\n        if (this[name] === value) {\n            return;\n        }\n\n        //everything will assume the value\n        this[name] = value;\n\n        // flag for redraw\n        this.trigger(\"Invalidate\");\n    },\n\n    // Setup all the properties that we need to define\n    _graphics_property_definitions: {\n        alpha: {\n            set: function (v) {\n                this._setterRenderable('_alpha', v);\n            },\n            get: function () {\n                return this._alpha;\n            },\n            configurable: true,\n            enumerable: true\n        },\n        _alpha: {enumerable:false},\n\n        visible: {\n            set: function (v) {\n                this._setterRenderable('_visible', v);\n            },\n            get: function () {\n                return this._visible;\n            },\n            configurable: true,\n            enumerable: true\n        },\n        _visible: {enumerable:false}\n    },\n\n    _defineRenderableProperites: function () {\n        for (var prop in this._graphics_property_definitions){\n            Object.defineProperty(this, prop, this._graphics_property_definitions[prop]);\n        }\n    },\n\n    init: function () {\n        // create setters and getters that associate properties such as alpha/_alpha\n        this._defineRenderableProperites();\n    },\n\n    // Renderable assumes that a draw layer has 3 important methods: attach, detach, and dirty\n\n    // Dirty the entity when it's invalidated\n    _invalidateRenderable: function() {\n        //flag if changed\n        if (this._changed === false) {\n            this._changed = true;\n            this._drawLayer.dirty(this);\n        }\n    },\n\n    // Attach the entity to a layer to be rendered\n    _attachToLayer: function(layer) {\n        if (this._drawLayer) {\n            this._detachFromLayer();\n        }\n        this._drawLayer = layer;\n        layer.attach(this);\n        this.bind(\"Invalidate\", this._invalidateRenderable);\n        this.trigger(\"LayerAttached\", layer);\n        this.trigger(\"Invalidate\");\n    },\n\n    // Detach the entity from a layer\n    _detachFromLayer: function() {\n        if (!this._drawLayer) {\n            return;\n        }\n        this._drawLayer.detach(this);\n        this.unbind(\"Invalidate\", this._invalidateRenderable);\n        this.trigger(\"LayerDetached\", this._drawLayer);\n        delete this._drawLayer;\n    },\n\n    /**@\n     * #.flip\n     * @comp Renderable\n     * @kind Method\n     * \n     * @trigger Invalidate - when the entity has flipped\n     * @sign public this .flip(String dir)\n     * @param dir - Flip direction\n     *\n     * Flip entity on passed direction\n     *\n     * @example\n     * ~~~\n     * this.flip(\"X\")\n     * ~~~\n     */\n    flip: function (dir) {\n        dir = dir || \"X\";\n        if (!this[\"_flip\" + dir]) {\n            this[\"_flip\" + dir] = true;\n            this.trigger(\"Invalidate\");\n        }\n        return this;\n    },\n\n    /**@\n     * #.unflip\n     * @comp Renderable\n     * @kind Method\n     * \n     * @trigger Invalidate - when the entity has unflipped\n     * @sign public this .unflip(String dir)\n     * @param dir - Unflip direction\n     *\n     * Unflip entity on passed direction (if it's flipped)\n     *\n     * @example\n     * ~~~\n     * this.unflip(\"X\")\n     * ~~~\n     */\n    unflip: function (dir) {\n        dir = dir || \"X\";\n        if (this[\"_flip\" + dir]) {\n            this[\"_flip\" + dir] = false;\n            this.trigger(\"Invalidate\");\n        }\n        return this;\n    }\n});"},"hash":"4e237b062bbf1715630402114b8bd30c"}