{"dependencies":[],"generated":{"js":"/**@\n * #Delay\n * @category Utilities\n * @kind Component\n *\n * A component for triggering functions after a given amount of time.\n *\n * This syncs with Crafty's internal clock, and so should generally be preferred to using methods such as `setTimeout`.\n */\nmodule.exports = {\n    init: function () {\n        this._delays = [];\n        this._delaysPaused = false;\n        this.bind(\"EnterFrame\", function (frameData) {\n            if (this._delaysPaused) return;\n            var index = this._delays.length;\n            while (--index >= 0) {\n                var item = this._delays[index];\n                if (item === false) {\n                    // remove canceled item from array\n                    this._delays.splice(index, 1);\n                } else {\n                    item.accumulator+=frameData.dt;\n                    // The while loop handles the (pathological) case where dt>delay\n                    while(item.accumulator >= item.delay && item.repeat >= 0){\n                        item.accumulator -= item.delay;\n                        item.repeat--;\n                        item.callback.call(this);\n                    }\n                    // remove finished item from array\n                    if (item.repeat<0){\n                        this._delays.splice(index, 1);\n                        if(typeof item.callbackOff === \"function\")\n                            item.callbackOff.call(this);\n                    }\n                }\n            }\n        });\n\n    },\n    /**@\n     * #.delay\n     * @comp Delay\n     * @kind Method\n     * @sign public this.delay(Function callback, Number delay[, Number repeat[, Function callbackOff]])\n     * @param callback - Method to execute after given amount of milliseconds. If reference of a\n     * method is passed, there's possibility to cancel the delay.\n     * @param delay - Amount of milliseconds to execute the method.\n     * @param repeat - (optional) How often to repeat the delayed function. A value of 0 triggers the delayed\n     * function exactly once. A value n > 0 triggers the delayed function exactly n+1 times. A\n     * value of -1 triggers the delayed function indefinitely. Defaults to one execution.\n     * @param callbackOff - (optional) Method to execute after delay ends(after all iterations are executed). \n     * If repeat value equals -1, callbackOff will never be triggered.\n     *\n     * The delay method will execute a function after a given amount of time in milliseconds.\n     *\n     * It is not a wrapper for `setTimeout`.\n     *\n     * If Crafty is paused, the delay is interrupted with the pause and then resume when unpaused\n     *\n     * If the entity is destroyed, the delay is also destroyed and will not have effect.\n     *\n     * @example\n     *\n     * The simplest delay\n     * ~~~\n     * Crafty.log(\"start\");\n     * Crafty.e(\"Delay\").delay(function() {\n     *   Crafty.log(\"100ms later\");\n     * }, 100, 0);\n     * ~~~\n     *\n     * Delay with callbackOff to be executed after all delay iterations\n     * ~~~\n     * Crafty.log(\"start\");\n     * Crafty.e(\"Delay\").delay(function() {\n     *   Crafty.log(\"100ms later\");\n     * }, 100, 3, function() {\n     *   Crafty.log(\"delay finished\");\n     * });\n     * ~~~\n     *\n     */\n    delay: function (callback, delay, repeat, callbackOff) {\n        this._delays.push({\n            accumulator: 0,\n            callback: callback,\n            callbackOff: callbackOff,\n            delay: delay,\n            repeat: (repeat < 0 ? Infinity : repeat) || 0,\n        });\n        return this;\n    },\n    /**@\n     * #.cancelDelay\n     * @comp Delay\n     * @kind Method\n     * \n     * @sign public this.cancelDelay(Function callback)\n     * @param callback - Method reference passed to .delay\n     *\n     * The cancelDelay method will cancel a delay set previously.\n     *\n     * @example\n     * ~~~\n     * var doSomething = function(){\n     *   Crafty.log(\"doing something\");\n     * };\n     *\n     * // execute doSomething each 100 miliseconds indefinetely\n     * var ent = Crafty.e(\"Delay\").delay(doSomething, 100, -1);\n     *\n     * // and some time later, cancel further execution of doSomething\n     * ent.cancelDelay(doSomething);\n     * ~~~\n     */\n    cancelDelay: function (callback) {\n        var index = this._delays.length;\n        while (--index >= 0) {\n            var item = this._delays[index];\n            if(item && item.callback === callback){\n                this._delays[index] = false;\n            }\n        }\n        return this;\n    },\n    /**@\n     * #.pauseDelays\n     * @comp Delay\n     * @kind Method\n     * \n     * @sign public this.pauseDelays()\n     *\n     * The pauseDelays method will pause all delays of this\n     * entity until resumed.\n     *\n     * @example\n     * ~~~\n     * var doSomething = function(){\n     *   Crafty.log(\"doing something\");\n     * };\n     *\n     * // execute doSomething each 100 miliseconds indefinetely\n     * var ent = Crafty.e(\"Delay\").delay(doSomething, 100, -1);\n     *\n     * // and some time later, the gameplay is paused\n     * ent.pauseDelays();\n     * ~~~\n     */\n    pauseDelays: function() {\n        this._delaysPaused = true;\n    },\n    /**@\n     * #.resumeDelays\n     * @comp Delay\n     * @kind Method\n     * \n     * @sign public this.resumeDelays()\n     *\n     * The resumeDelays method will resume earlier paused delays for this\n     * entity\n     *\n     * @example\n     * ~~~\n     * var doSomething = function(){\n     *   Crafty.log(\"doing something\");\n     * };\n     *\n     * // execute doSomething each 100 miliseconds indefinetely\n     * var ent = Crafty.e(\"Delay\").delay(doSomething, 100, -1);\n     *\n     * // and some time later, the gameplay is paused (or only\n     * // a part of it is frozen)\n     * ent.pauseDelays();\n     *\n     * // the player resumes gameplay\n     * ent.resumeDelays();\n     * ~~~\n     */\n    resumeDelays: function() {\n        this._delaysPaused = false;\n    }\n};\n"},"hash":"72f5a221a164849d8459b6438dc37397"}