{"dependencies":[{"name":"../core/core.js","loc":{"line":1,"column":21}}],"generated":{"js":"var t=require(\"../core/core.js\");t.extend({diamondIso:{_tile:{width:0,height:0},getTileDimensions:function(){return{w:this._tile.width,h:this._tile.height}},_map:{width:0,height:0},_origin:{x:0,y:0},_tiles:[],getTile:function(t,i,h){return this._tiles[t][i][h]},init:function(t,i,h,e,s,r){this._tile.width=parseInt(t,10),this._tile.height=parseInt(i,10)||parseInt(t,10)/2,this._tile.r=this._tile.width/this._tile.height,this._map.width=parseInt(h,10),this._map.height=parseInt(e,10)||parseInt(h,10);for(var n=0;n<h;n++){this._tiles[n]=Array();for(var l=0;l<e;l++)this._tiles[n][l]=Array()}return this.x=parseInt(s,10)||0,this.y=parseInt(r,10)||0,this.layerZLevel=h+e+1,this},place:function(t,i,h,e){var s=this.pos2px(i,h),r=t.h/this._tile.height;t.x=s.x,t.y=s.y-(r-2)*this._tile.height-this._tile.height*e,t.z=this.getZAtLoc(i,h,e);for(var n=0;n<=r-2;n++){var l=this._tiles[i][h][e+n];l&&l!==t&&l.destroy(),this._tiles[i][h][e+n]=t}return this},detachTile:function(t){for(var i=0;i<this._map.width;i++)for(var h=0;h<this._map.height;h++)for(var e=this._tiles[i][h].length,s=0;s<e;s++)if(this._tiles[i][h][s]&&t===this._tiles[i][h][s]){for(var r=t.h/this._tile.height,n=0;n<r;n++)this._tiles[i][h][s+n]=void 0;return{x:i,y:h,z:s}}return!1},centerAt:function(i,h){var e=this.pos2px(i,h);t.viewport.x=-e.x+t.viewport.width/2-this._tile.width,t.viewport.y=-e.y+t.viewport.height/2},getZAtLoc:function(t,i,h){return this.layerZLevel*h+t+i},pos2px:function(t,i){return{x:this.x+(t-i-1)*this._tile.width/2,y:this.y+(t+i)*this._tile.height/2}},px2pos:function(t,i){var h=(i-this.y)/this._tile.height,e=(t-this.x)/this._tile.width,s=h+e,r=h-e,n=s>0&&s<this._map.width,l=r>0&&r<this._map.height;if(n&&l)return{x:~~s,y:~~r}},getOverlappingTiles:function(t,i){var h=this.px2pos(t,i),e=[],s=~~h.x,r=~~h.y,n=this._map.width-s,l=this._map.height-r,_=Math.min(n,l),o=this._tiles[s][r][1];o&&e.push(o);for(var a=1;a<_;a++){var p=this._tiles[s+a][r+a][a];p&&e.push(p)}return e},polygon:function(i){i.requires(\"Collision\");var h=[0,i.h-0-this._tile.height/2,0-this._tile.width/2,i.h-0-0,0-this._tile.width,i.h-0-this._tile.height/2,0-this._tile.width/2,i.h-0-this._tile.height];return new t.polygon(h)}}});"},"hash":"91d068e98d8803b92efb91853a4ec51e"}