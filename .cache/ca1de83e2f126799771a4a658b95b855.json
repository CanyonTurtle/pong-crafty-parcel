{"dependencies":[{"name":"../core/core.js","loc":{"line":1,"column":21}},{"name":"fs","loc":{"line":6,"column":17}},{"name":"C:\\Users\\canno\\Documents\\Code\\parcel-crafty\\node_modules\\craftyjs\\src\\graphics\\shaders\\sprite.vert","includedInParent":true},{"name":"C:\\Users\\canno\\Documents\\Code\\parcel-crafty\\node_modules\\craftyjs\\src\\graphics\\shaders\\sprite.frag","includedInParent":true}],"generated":{"js":"var e=require(\"../core/core.js\"),t=require(\"fs\");e.defaultShader(\"Image\",new e.WebGLShader(\"attribute vec2 aPosition;\\nattribute vec3 aOrientation;\\nattribute vec2 aLayer;\\nattribute vec2 aTextureCoord;\\n\\nvarying mediump vec3 vTextureCoord;\\n\\nuniform vec4 uViewport;\\nuniform mediump vec2 uTextureDimensions;\\n\\nmat4 viewportScale = mat4(2.0 / uViewport.z, 0, 0, 0,    0, -2.0 / uViewport.w, 0,0,    0, 0,1,0,    -1,+1,0,1);\\nvec4 viewportTranslation = vec4(uViewport.xy, 0, 0);\\n\\nvoid main() {\\n  vec2 pos = aPosition;\\n  vec2 entityOrigin = aOrientation.xy;\\n  mat2 entityRotationMatrix = mat2(cos(aOrientation.z), sin(aOrientation.z), -sin(aOrientation.z), cos(aOrientation.z));\\n  \\n  pos = entityRotationMatrix * (pos - entityOrigin) + entityOrigin ;\\n  gl_Position = viewportScale * (viewportTranslation + vec4(pos, 1.0/(1.0+exp(aLayer.x) ), 1) );\\n  vTextureCoord = vec3(aTextureCoord, aLayer.y);\\n}\",\"varying mediump vec3 vTextureCoord;\\n  \\nuniform sampler2D uSampler;\\nuniform mediump vec2 uTextureDimensions;\\n\\nvoid main(void) {\\n  highp vec2 coord =   vTextureCoord.xy / uTextureDimensions;\\n  mediump vec4 base_color = texture2D(uSampler, coord);\\n  gl_FragColor = vec4(base_color.rgb*base_color.a*vTextureCoord.z, base_color.a*vTextureCoord.z);\\n}\",[{name:\"aPosition\",width:2},{name:\"aOrientation\",width:3},{name:\"aLayer\",width:2},{name:\"aTextureCoord\",width:2}],function(e,t){var i=e.pos;e.program.writeVector(\"aTextureCoord\",0,0,0,i._h,i._w,0,i._w,i._h)})),e.c(\"Image\",{_repeat:\"repeat\",ready:!1,init:function(){this.bind(\"Draw\",this._drawImage),this.bind(\"LayerAttached\",this._setupImage)},remove:function(){this.unbind(\"LayerAttached\",this._setupImage),this.unbind(\"Draw\",this._drawImage)},image:function(t,i){if(this.__image=t,this._repeat=i||\"no-repeat\",this.img=e.asset(t),this.img)this._setupImage(this._drawLayer);else{this.img=new Image,e.asset(t,this.img),this.img.src=t;var a=this;this.img.onload=function(){a._setupImage(a._drawLayer)}}return this.trigger(\"Invalidate\"),this},_setupImage:function(t){this.img&&t&&(\"Canvas\"===t.type?this._pattern=this._drawContext.createPattern(this.img,this._repeat):\"WebGL\"===t.type&&(this._establishShader(\"image:\"+this.__image,e.defaultShader(\"Image\")),this.program.setTexture(this._drawLayer.makeTexture(this.__image,this.img,\"no-repeat\"!==this._repeat))),\"no-repeat\"===this._repeat&&(this.w=this.w||this.img.width,this.h=this.h||this.img.height),this.ready=!0,this.trigger(\"Invalidate\"))},_drawImage:function(e){if(\"canvas\"===e.type){if(!this.ready||!this._pattern)return;var t=e.ctx;t.fillStyle=this._pattern,t.save(),t.translate(e.pos._x,e.pos._y),t.fillRect(0,0,e.pos._w,e.pos._h),t.restore()}else\"DOM\"===e.type?this.__image&&(e.style.backgroundImage=\"url(\"+this.__image+\")\",e.style.backgroundRepeat=this._repeat):\"webgl\"===e.type&&e.program.draw(e,this)}});"},"hash":"a766c0fd39e247149d9eceea2c2c0a1c"}