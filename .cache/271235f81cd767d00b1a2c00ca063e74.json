{"dependencies":[{"name":"../core/core.js","loc":{"line":1,"column":21}}],"generated":{"js":"var e=require(\"../core/core.js\"),s=window.document;e.extend({audio:{sounds:{},supported:null,codecs:{ogg:'audio/ogg; codecs=\"vorbis\"',wav:'audio/wav; codecs=\"1\"',webma:'audio/webm; codecs=\"vorbis\"',mp3:'audio/mpeg; codecs=\"mp3\"',m4a:'audio/mp4; codecs=\"mp4a.40.2\"'},volume:1,muted:!1,paused:!1,playCheck:null,_canPlay:function(){if(this.supported={},e.support.audio){var s,t=this.audioElement();for(var i in this.codecs)s=t.canPlayType(this.codecs[i]),this.supported[i]=\"\"!==s&&\"no\"!==s}},supports:function(e){return null===this.supported&&this._canPlay(),!!this.supported[e]},audioElement:function(){return\"undefined\"!=typeof Audio?new Audio(\"\"):s.createElement(\"audio\")},create:function(s,t){var i=t.substr(t.lastIndexOf(\".\")+1).toLowerCase();if(!this.supports(i))return!1;var n=this.audioElement();return n.id=s,n.preload=\"auto\",n.volume=e.audio.volume,n.src=t,e.asset(t,n),this.sounds[s]={obj:n,played:0,volume:e.audio.volume},this.sounds[s]},add:function(s,t){if(e.support.audio){var i,n;if(1===arguments.length&&\"object\"==typeof s)for(var o in s)for(i in s[o])if(n=e.audio.create(o,s[o][i]))break;if(\"string\"==typeof s&&(\"string\"==typeof t&&(n=e.audio.create(s,t)),\"object\"==typeof t))for(i in t)if(n=e.audio.create(s,t[i]))break;return n}},play:function(s,t,i){if(0!==t&&e.support.audio&&this.sounds[s]){var n=this.sounds[s],o=this.getOpenChannel();if(!o)return null;o.id=s,o.repeat=t;var u=o.obj;return o.volume=n.volume=n.obj.volume=i||e.audio.volume,u.volume=n.volume,u.src=n.obj.src,this.muted&&(u.volume=0),u.play(),n.played++,o.onEnd=function(){n.played<o.repeat||-1===o.repeat?(this.currentTime&&(this.currentTime=0),this.play(),n.played++):(o.active=!1,this.pause(),this.removeEventListener(\"ended\",o.onEnd,!0),this.currentTime=0,e.trigger(\"SoundComplete\",{id:o.id}))},u.addEventListener(\"ended\",o.onEnd,!0),u}},maxChannels:7,setChannels:function(e){this.maxChannels=e,e<this.channels.length&&(this.channels.length=e)},channels:[],getOpenChannel:function(){for(var e=0;e<this.channels.length;e++){var s=this.channels[e];if(!1===s.active||s.obj.ended&&s.repeat<=this.sounds[s.id].played)return s.active=!0,s}if(e<this.maxChannels){var t={obj:this.audioElement(),active:!0,_is:function(e){return this.id===e&&this.active}};return this.channels.push(t),t}return null},remove:function(s){if(e.support.audio){var t,i,n=e.paths().audio;if(s)this.sounds[s]&&(i=(t=this.sounds[s]).obj.src.split(\"/\").pop(),e.audio.stop(s),delete e.assets[n+i],delete e.assets[t.obj.src],delete e.audio.sounds[s]);else for(var o in this.sounds)i=(t=this.sounds[o]).obj.src.split(\"/\").pop(),e.audio.stop(s),delete e.assets[n+i],delete e.assets[t.obj.src],delete e.audio.sounds[s]}},stop:function(s){if(e.support.audio){var t;for(var i in this.channels)t=this.channels[i],(!s&&t.active||t._is(s))&&(t.active=!1,t.obj.pause())}},_mute:function(s){if(e.support.audio){var t;for(var i in this.channels)(t=this.channels[i]).obj.volume=s?0:t.volume;this.muted=s}},toggleMute:function(){this.muted?this._mute(!1):this._mute(!0)},mute:function(){this._mute(!0)},unmute:function(){this._mute(!1)},pause:function(s){if(e.support.audio&&s&&this.sounds[s]){var t;for(var i in this.channels)(t=this.channels[i])._is(s)&&!t.obj.paused&&t.obj.pause()}},unpause:function(s){if(e.support.audio&&s&&this.sounds[s]){var t;for(var i in this.channels)(t=this.channels[i])._is(s)&&t.obj.paused&&t.obj.play()}},togglePause:function(s){if(e.support.audio&&s&&this.sounds[s]){var t;for(var i in this.channels)(t=this.channels[i])._is(s)&&(t.obj.paused?t.obj.play():t.obj.pause())}},isPlaying:function(s){if(!e.support.audio)return!1;for(var t in this.channels)if(this.channels[t]._is(s))return!0;return!1}}});"},"hash":"304af1e48d69ff34d956997c01d96d51"}