{"dependencies":[{"name":"./ui","loc":{"line":1,"column":20}},{"name":"./setup","loc":{"line":2,"column":23}},{"name":"./score","loc":{"line":3,"column":23}}],"generated":{"js":"\"use strict\";\n\nvar _ui = require(\"./ui\");\n\nvar UI = _interopRequireWildcard(_ui);\n\nvar _setup = require(\"./setup\");\n\nvar Setup = _interopRequireWildcard(_setup);\n\nvar _score = require(\"./score\");\n\nvar Score = _interopRequireWildcard(_score);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// this scene defines how each round of Pong plays.\nCrafty.defineScene('playRound', function () {\n\n  Crafty.trigger('initGameUI');\n\n  var ball;\n  // ball entity\n  ball = Crafty.e('Ball');\n  ball.start({\n    x: Setup.width / 2 - Setup.scaleX(5) / 2,\n    y: Setup.height / 2 - Setup.scaleY(5 * Setup.ASPECT_RATIO) / 2,\n    vx: Setup.scaleX((Math.random() > 0.5 ? 1 : -1) * (20 + Math.random() * 20)),\n    vy: Setup.scaleY((Math.random() > 0.5 ? 1 : -1) * (20 + Math.random() * 20))\n  });\n\n  // paddle entities\n  let paddle1 = Crafty.e('Paddle');\n  paddle1.startPaddle({\n    up: Crafty.keys.W,\n    down: Crafty.keys.S,\n    x: Setup.bounds.left + Setup.scaleX(2),\n    y: Setup.height / 2 - Setup.scaleY(15) / 2\n  });\n  paddle1.color('#01ff70');\n\n  var paddle2;\n  if (Score.gameMode === 1) {\n    paddle2 = Crafty.e('CpuPaddle');\n    paddle2.start({\n      x: Setup.bounds.right - Setup.scaleX(2) - Setup.scaleX(1.5),\n      y: Setup.height / 2 - Setup.scaleY(15) / 2,\n      ball: ball\n    });\n  } else {\n    paddle2 = Crafty.e('Paddle');\n    paddle2.startPaddle({\n      up: Crafty.keys.UP_ARROW,\n      down: Crafty.keys.DOWN_ARROW,\n      x: Setup.bounds.right - Setup.scaleX(2) - Setup.scaleX(1.5),\n      y: Setup.height / 2 - Setup.scaleY(15) / 2\n    });\n  }\n  paddle2.color('#ff4136');\n\n  let game = Crafty.e('2D, Canvas');\n\n  var firstFrame = true;\n  var launchedBall = false;\n  var pauseGame = false;\n  var someoneScoredFrame = 0;\n  var startFrame;\n\n  // GAME LOOP\n  game.bind('EnterFrame', function (eventData) {\n    if (Score.whoJustScored !== 0) {\n      if (!pauseGame) {\n        someoneScoredFrame = eventData.frame;\n      }\n      pauseGame = true;\n      Crafty.trigger('displaySomeoneJustWonText');\n    }\n    if (!pauseGame) {\n      if (launchedBall) {\n        Crafty.trigger('movePaddles', eventData.dt);\n        Crafty.trigger('moveBall', eventData.dt);\n      }\n\n      // make ball after a second\n      if (firstFrame) {\n        firstFrame = false;\n        startFrame = eventData.frame;\n      }\n      if (eventData.frame - startFrame > 60 && !launchedBall) {\n        launchedBall = true;\n      }\n\n      // speed up the ball over time\n      if (launchedBall && eventData.frame % 60 === 0) {\n        if (Math.abs(ball.vx) < Setup.scaleX(Setup.MAX_BALL_SPEED_X)) {\n          ball.vx *= 1.1;\n        } else {\n          console.log('capped');\n        }\n      }\n    } else {\n      if (eventData.frame - someoneScoredFrame > 60) {\n        Score.prepForRound();\n        Crafty.enterScene('playRound');\n      }\n    }\n  });\n});"},"hash":"039c8c90a9267988b6d4806218769a9e"}