{"dependencies":[{"name":"../core/core.js","loc":{"line":1,"column":21}}],"generated":{"js":"var e=require(\"../core/core.js\");e.c(\"SpriteAnimation\",{_reels:null,_currentReelId:null,_currentReel:null,_isPlaying:!1,animationSpeed:1,init:function(){this._reels={}},reel:function(t,i,r,n,s,a){if(0===arguments.length)return this._currentReelId;if(1===arguments.length&&\"string\"==typeof t){if(void 0===this._reels[t])throw\"The specified reel \"+t+\" is undefined.\";return this.pauseAnimation(),this._currentReelId!==t&&(this._currentReelId=t,this._currentReel=this._reels[t],this._updateSprite(),this.trigger(\"ReelChange\",this._currentReel)),this}var l,h;if(l={id:t,frames:[],currentFrame:0,easing:new e.easing(i),defaultLoops:1},l.duration=l.easing.duration,\"number\"==typeof r)if(a=a||1/0,s>=0)for(h=0;h<s;++h)l.frames.push([r,n]),++r>=a&&(r=0,n++);else for(h=0;h>s;--h)l.frames.push([r,n]),--r<0&&(r=a-1,n--);else{if(3!==arguments.length||\"object\"!=typeof r)throw\"Unrecognized arguments. Please see the documentation for 'reel(...)'.\";l.frames=r}return this._reels[t]=l,this},animate:function(e,t){\"string\"==typeof e&&this.reel(e);var i=this._currentReel;if(void 0===i||null===i)throw\"No reel is specified, and there is no currently active reel.\";return this.pauseAnimation(),void 0===t&&(t=\"number\"==typeof e?e:1),i.easing.reset(),this.loops(t),this._setFrame(0),this.bind(\"EnterFrame\",this._animationTick),this._isPlaying=!0,this.trigger(\"StartAnimation\",i),this},resumeAnimation:function(){return!1===this._isPlaying&&null!==this._currentReel&&(this.bind(\"EnterFrame\",this._animationTick),this._isPlaying=!0,this._currentReel.easing.resume(),this.trigger(\"StartAnimation\",this._currentReel)),this},pauseAnimation:function(){return!0===this._isPlaying&&(this.unbind(\"EnterFrame\",this._animationTick),this._isPlaying=!1,this._reels[this._currentReelId].easing.pause()),this},resetAnimation:function(){var e=this._currentReel;if(null===e)throw\"No active reel to reset.\";return this.reelPosition(0),e.easing.repeat(e.defaultLoops),this},loops:function(e){return 0===arguments.length?null!==this._currentReel?this._currentReel.easing.loops:0:(null!==this._currentReel&&(e<0&&(e=1/0),this._currentReel.easing.repeat(e),this._currentReel.defaultLoops=e),this)},reelPosition:function(e){if(null===this._currentReel)throw\"No active reel.\";if(0===arguments.length)return this._currentReel.currentFrame;var t,i=this._currentReel.frames.length;if(\"end\"===e&&(e=i-1),e<1&&e>0)t=e,e=Math.floor(i*t);else{if(e!==Math.floor(e))throw\"Position \"+e+\" is invalid.\";e<0&&(e=i-1+e),t=e/i}return e=Math.min(e,i-1),e=Math.max(e,0),this._setProgress(t),this._setFrame(e),this},_animationTick:function(e){var t=this._reels[this._currentReelId];t.easing.tick(e.dt*this.animationSpeed);var i=t.easing.value(),r=Math.min(Math.floor(t.frames.length*i),t.frames.length-1);this._setFrame(r),!0===t.easing.complete&&(this.pauseAnimation(),this.trigger(\"AnimationEnd\",this._currentReel))},_setFrame:function(e){var t=this._currentReel;e!==t.currentFrame&&(t.currentFrame=e,this._updateSprite(),this.trigger(\"FrameChange\",t))},_updateSprite:function(){var e=this._currentReel,t=e.frames[e.currentFrame];this.sprite(t[0],t[1])},_setProgress:function(e,t){this._currentReel.easing.setProgress(e,t)},isPlaying:function(e){return!!this._isPlaying&&(e?this._currentReelId===e:!!this._currentReelId)},getReel:function(e){if(0===arguments.length){if(!this._currentReelId)return null;e=this._currentReelId}return this._reels[e]}});"},"hash":"3c78953447accd7345388f0634774e34"}